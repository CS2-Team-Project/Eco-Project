<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CS2TP</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
  <section id="header">
    <a href="#"><img src="img/logo1.png" class="logo" alt=""></a>
    <nav id="nav">
      <li><a href="home.html">Home</a></li>
      <li><a href="products.html">Products</a></li>
      <li><a href="contact.html">Contact</a></li>
      <li><a href="about.html">About Us</a></li>
      <div class="user-actions">
        <a href="#" class="log">LOGIN</a>
        <a href="#" class="sign">SIGN UP</a>
      </div>
      <li><a href="basket.html"><i class="fa-solid fa-cart-shopping"></i></a></li>
    </nav>
  </section>

  <section id="products" class="section-p1">
    <h1>Our Products</h1>
    <div class="product-container">
      <!-- Product 1 -->
      <div class="product-card" data-id="1">
        <img src="img/product1grey.png" alt="Product 1">
        <h3>hello</h3>
        <p>Chilliwack Bomber Heritage</p>
        <p class="price">£1375</p>
        <div class="size-buttons">
          <button class="size" data-size="Small">S</button>
          <button class="size" data-size="Medium">M</button>
          <button class="size" data-size="Large">L</button>
        </div>
        <button class="add-to-basket">Add to Basket</button>
      </div>

      <!-- Product 2 -->
      <div class="product-card" data-id="2">
        <img src="img/product2black.png" alt="Product 2">
        <h3>Moncler Jacket</h3>
        <p>Moncler New Maya Down Jacket</p>
        <p class="price">£765</p>
        <div class="size-buttons">
          <button class="size" data-size="Small">S</button>
          <button class="size" data-size="Medium">M</button>
          <button class="size" data-size="Large">L</button>
        </div>
        <button class="add-to-basket">Add to Basket</button>
      </div>

      <!-- Product 3 -->
      <div class="product-card" data-id="3">
        <img src="img/product3cream.png" alt="Product 3">
        <h3>The North Face Puffer</h3>
        <p>North Face 1996 Retro Nuptse</p>
        <p class="price">£315</p>
        <div class="size-buttons">
          <button class="size" data-size="Small">S</button>
          <button class="size" data-size="Medium">M</button>
          <button class="size" data-size="Large">L</button>
        </div>
        <button class="add-to-basket">Add to Basket</button>
      </div>
    </div>
  </section>

  <footer>
    <div class="container">
      <div class="footer-content">
        <h3>Contact</h3>
        <p>Email: info.concept@gmail.com</p>
      </div>
      <div class="footer-content">
        <h3>Quick Links</h3>
        <ul class="list">
          <li><a href="#">Home</a></li>
          <li><a href="#">Products</a></li>
          <li><a href="contact.html">Contact</a></li>
          <li><a href="about.html">About Us</a></li>
        </ul>
      </div>
      <div class="footer-content">
        <h3>Follow Us</h3>
        <ul class="media-icons">
          <li><a href="#"><i class="fab fa-linkedin"></i></a></li>
          <li><a href="#"><i class="fab fa-twitter"></i></a></li>
          <li><a href="#"><i class="fab fa-facebook"></i></a></li>
          <li><a href="#"><i class="fab fa-instagram"></i></a></li>
        </ul>
      </div>
    </div>
  </footer>

  <script>
    // Function to add products to basket
    function addToBasket(productId, productName, price, size, image) {
      let basket = JSON.parse(localStorage.getItem('basket')) || [];
      const product = {
        id: productId,
        name: productName,
        price: price,
        size: size,
        image: image, // Add the image URL to the basket
        quantity: 1
      };

      // Check if the product is already in the basket
      const existingProductIndex = basket.findIndex(item => item.name === productName && item.size === size);
      
      if (existingProductIndex >= 0) {
        // If product already exists in basket, increase quantity
        basket[existingProductIndex].quantity += 1;
      } else {
        // Add new product to the basket
        basket.push(product);
      }

      // Save updated basket to localStorage
      localStorage.setItem('basket', JSON.stringify(basket));
      alert('Item added to your basket!');
    }

    // Add event listeners to "Add to Basket" buttons
    document.querySelectorAll('.add-to-basket').forEach(button => {
      button.addEventListener('click', (e) => {
        const productCard = e.target.closest('.product-card');
        const productId = productCard.getAttribute('data-id');
        const productName = productCard.querySelector('h3').textContent;
        const price = parseFloat(productCard.querySelector('.price').textContent.replace('£', ''));
        const selectedSize = productCard.querySelector('.size.selected') ? productCard.querySelector('.size.selected').dataset.size : '';
        const image = productCard.querySelector('img').src;

        if (!selectedSize) {
          alert('Please select a size.');
          return;
        }

        // Call addToBasket function
        addToBasket(productId, productName, price, selectedSize, image);
      });
    });

    // Add event listeners to size buttons
    document.querySelectorAll('.size').forEach(button => {
      button.addEventListener('click', (e) => {
        const sizeButtons = e.target.closest('.size-buttons').querySelectorAll('.size');
        sizeButtons.forEach(button => button.classList.remove('selected'));
        e.target.classList.add('selected');
      });
    });
  </script>
</body>
</html>
