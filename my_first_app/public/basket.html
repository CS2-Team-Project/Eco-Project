<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your Basket</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
  <section id="header">
    <a href="#"><img src="img/logo1.png" class="logo" alt=""></a>
    <nav id="nav">
      <li><a href="home.html">Home</a></li>
      <li><a href="products.html">Products</a></li>
      <li><a href="contact.html">Contact</a></li>
      <li><a href="about.html">About Us</a></li>
      <div class="user-actions">
        <a href="#" class="log">LOGIN</a>
        <a href="#" class="sign">SIGN UP</a>
      </div>
      <li><a href="basket.html"><i class="fa-solid fa-cart-shopping"></i></a></li>
    </nav>
  </section>

  <section id="basket" class="section-p1">
    <h1>Your Basket</h1>
    <div id="basket-container"></div>

    <div id="basket-summary">
      <p>Total Items: <span id="total-items">0</span></p>
      <p>Total Price: £<span id="total-price">0.00</span></p>
    </div>

    <div id="basket-actions">
      <button id="clear-basket">Clear Basket</button>
      <button id="checkout-button">Checkout</button>
    </div>
  </section>

  <script>
    // Function to render the basket
    const renderBasket = () => {
      let basket = JSON.parse(localStorage.getItem('basket')) || [];
      const basketContainer = document.getElementById('basket-container');
      const totalItems = document.getElementById('total-items');
      const totalPrice = document.getElementById('total-price');

      if (basket.length === 0) {
        basketContainer.innerHTML = '<p>Your basket is empty!</p>';
        totalItems.textContent = 0;
        totalPrice.textContent = "0.00";
        return;
      }

      basketContainer.innerHTML = ''; // Clear previous basket contents
      let totalQuantity = 0;
      let totalCost = 0;

      basket.forEach((item, index) => {
        totalQuantity += item.quantity;
        totalCost += item.quantity * item.price;

        const itemHTML = `
          <div class="basket-item" data-index="${index}">
            <img src="${item.image}" alt="${item.name}">
            <div class="details">
              <h3>${item.name}</h3>
              <p>Size: ${item.size}</p>
              <p>Price: £${item.price.toFixed(2)}</p>
              <div class="quantity-control">
                <button class="decrease-quantity">-</button>
                <span class="quantity">${item.quantity}</span>
                <button class="increase-quantity">+</button>
              </div>
            </div>
          </div>
        `;
        basketContainer.innerHTML += itemHTML;
      });

      totalItems.textContent = totalQuantity;
      totalPrice.textContent = totalCost.toFixed(2);

      // Add event listeners for quantity controls
      document.querySelectorAll('.increase-quantity').forEach(button => {
        button.addEventListener('click', (e) => {
          const index = e.target.closest('.basket-item').dataset.index;
          updateQuantity(index, 1);
        });
      });

      document.querySelectorAll('.decrease-quantity').forEach(button => {
        button.addEventListener('click', (e) => {
          const index = e.target.closest('.basket-item').dataset.index;
          updateQuantity(index, -1);
        });
      });
    };

    // Update quantity function
    const updateQuantity = (index, change) => {
      let basket = JSON.parse(localStorage.getItem('basket')) || [];
      if (basket[index]) {
        basket[index].quantity += change;

        if (basket[index].quantity <= 0) {
          basket.splice(index, 1); // Remove item if quantity is 0
        }
        localStorage.setItem('basket', JSON.stringify(basket));
        renderBasket(); // Re-render basket
      }
    };

    // Clear basket function
    document.getElementById('clear-basket').addEventListener('click', () => {
      localStorage.removeItem('basket');
      alert('Basket has been cleared!');
      renderBasket();
    });

    // Checkout button
document.getElementById('checkout-button').addEventListener('click', () => {
  const basket = JSON.parse(localStorage.getItem('basket')) || [];
  if (basket.length === 0) {
    alert('Your basket is empty!');
  } else {
    window.location.href = 'checkout.html'; // Correct path
  }
});


    // Initial rendering
    renderBasket();
  </script>
</body>

</html>
